#allowing setters with return values

Owner: alibaba

Repo: fastjson

Labels: 

## zimdo (17 Apr 2012)

Hey, I like to code my objects to allow setters with return values and was wondering what would be necessary to allow this with fastjson as it ignores that in the com / alibaba / fastjson / util / DeserializeBeanInfo.java at Line 162

``` java
            if (!method.getReturnType().equals(Void.TYPE)) {
                continue;
            }
```

If I just remove that line it throws an error complaining about the stack.length not being zero... haven't dived in enough to understand what happens there. but i would really love to be able to write user.setId(10).setName("John") etc.  :)


## axmanwang (18 Apr 2012)

the rule of java beans specification defines the setters's return type must be void.
you should write "obj.p(xx).p1(xx)" if you wanna  write "obj.setP(xx).setP1(xx)".  (naming specification  of builder pattern)


## zimdo (18 Apr 2012)

that's all nice and dandy. i actually wanted to avoid having setP() and p() just for that sake i.e. DRY. I am not a big stickler to the specs in those regards if it helps making APIs simpler and easier to use and I sure don't want to implement a new builder-class for each model I have.  :)


## zimdo (18 Apr 2012)

so I know it's not in the specs... but do you know what would be needed to allow that in fastjson?!? i could fork and implement it myself I am just not sure if there are any bigger consequences aside from the fact that it violates a java convention and if all that is needed is removing the 3 lines above and fixing some of your generated bytecode classes that would be worth it IMHO.


## zimdo (18 Apr 2012)

also... great work on fastjson!!! just wanted to to tell you. :)


## wenshao (03 May 2012)

fastjson 1.1.19 will support builder's set


